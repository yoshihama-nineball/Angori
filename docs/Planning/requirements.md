# Angori 機能要件定義書

*最終更新日: 2025年7月18日*

---

## 📋 概要

本ドキュメントでは、Angori（ゴリラのアンガーマネジメントアプリ）の機能要件を定義します。市場調査とペルソナ設計の結果を踏まえ、**MVP1.0（2025年8月末リリース予定）**に向けた機能の優先度と仕様を明確化します。

## 🎯 プロダクトビジョン

**「感情コントロールが苦手な人でも、ゴリラと一緒なら怒りを笑いに変えられる」**

ユーモアと専門性を両立させた、世界初のゴリラキャラクター搭載アンガーマネジメントアプリとして、従来の真面目なアプローチでは継続できなかったユーザーに新しい選択肢を提供します。

---

## 🚀 MVP1.0 機能要件

### 優先度分類

| 優先度 | 対象期間 | 説明 |
|--------|----------|------|
| **Critical** | MVP1.0 (2025年8月末) | リリースに絶対必要な機能 |
| **High** | MVP1.1 (2025年9月) | ユーザー体験向上に重要 |
| **Medium** | フェーズ2 (2025年秋) | 差別化・収益化につながる機能 |
| **Low** | 将来版 | 長期的な成長のための機能 |

---

## 🔥 Critical（MVP1.0必須機能）

### 1. ユーザー認証システム

#### 1.1 基本認証機能
- **機能**: メールアドレス・パスワードによるユーザー登録・ログイン
- **要件**:
  - パスワード強度チェック（8文字以上、英数字混在）
  - メールアドレス重複チェック
  - セッション管理（JWT認証）
- **成功基準**: ユーザー登録成功率95%以上
- **備考**: ASD/HSP特性ユーザーのプライバシー重視に配慮

#### 1.2 セキュリティ機能
- **機能**: アンガーマネジメント相談内容の暗号化保護
- **要件**:
  - データベース保存時の暗号化
  - HTTPS通信の強制
  - セッションタイムアウト（24時間）
- **成功基準**: セキュリティ脆弱性0件

### 2. アンガーログ記録機能

#### 2.1 基本記録機能
- **機能**: 怒りの状況・感情・レベルを構造化して記録
- **入力項目**:
  - **怒りレベル**: 1-10段階（「バナナ何本分...じゃなくて10段階中いくつだ？」）
  - **発生日時**: 自動取得・手動調整可能
  - **発生場所**
  - **状況の列挙**: 自由記述（事実と認知を混同せずに書く）
  - **トリガー**: 過去のトリガーから選択式or自由記述
  - **感情詳細**: 自由記述
  - **身体反応**: 選択式（頭痛、動悸、手の震え、その他）

#### 2.2 ASD/HSP特性への配慮
- **視覚的明確さ**: 入力欄の明確な区別、必須/任意の表示
- **予測可能性**: 一貫したフォーム構造
- **詳細記録**: 細かい状況分析をサポート
- **中断・再開**: 入力途中での保存機能

### 3. AIゴリラ相談機能

#### 3.1 対話システム
- **機能**: OpenAI GPT-4o-mini を活用したリアルタイム相談
- **ゴリラキャラクター仕様**:
  - **名前**: 決める必要があれば検討
  - **口調**: 親しみやすく、少しユーモラス
  - **専門性**: アンガーマネジメントの知識を持つ
  - **一貫性**: 予測可能で安心できる応答パターン

#### 3.2 相談フロー
1. **導入**: 「どうした？バナナ食うか？相談に乗るぞ？」的な親しみやすい声かけ
2. **状況確認**: ユーザーの怒りの状況を段階的に聞き取り
3. **感情整理**: 記録された内容を基に、感情の客観視をサポート
4. **アドバイス**: 個別化されたアンガーマネジメント技法の提案
5. **振り返り**: 今回の気づきや次回への活かし方を確認

#### 3.3 AIアドバイス機能
- **機能**: 相談セッション終了時の個別化アドバイス生成
- **アドバイス内容**:
  - 今回の怒りパターン分析
  - 類似過去事例との比較
  - 具体的な対処法提案
  - 予防策の提案
- **技術制約**: OpenAI API月10ドル上限内での運用

### 4. 過去ログ管理機能

#### 4.1 アンガーログ一覧表示
- **機能**: 過去の怒り記録を時系列で表示
- **表示項目**:
  - 発生日時
  - 怒りレベル（視覚的表示）
  - 状況の要約
  - 相談実施有無
- **ソート機能**: 日時、怒りレベル、相談実施有無
- **フィルター機能**: 期間指定、怒りレベル範囲

#### 4.2 詳細表示機能
- **機能**: 個別のアンガーログ詳細表示・編集
- **表示内容**:
  - 記録した全項目の表示
  - AIからのアドバイス履歴
  - 編集・削除機能
- **ASD特性配慮**: 詳細データの構造化表示

#### 4.3 検索機能
- **機能**: 過去ログの内容検索
- **検索対象**: 状況、感情詳細、トリガー
- **検索方式**: 部分一致検索
- **成功基準**: 検索応答時間1秒以内

### 5. トップ画面・ナビゲーション

#### 5.1 ダッシュボード機能
- **機能**: ユーザーの現状を一目で把握できる画面
- **表示項目**:
  - 相談ボタン（「どうした？バナナ食うか？相談に乗るぞ？」）
  - 最新のアンガーログ（3件）
  - 落ち着きポイント（暫定表示、詳細はMVP1.1で実装）
  - 過去ログ一覧への導線

#### 5.2 ナビゲーション
- **機能**: アプリ内の主要機能への導線
- **構成**:
  - ホーム（ダッシュボード）
  - 新しい記録
  - 過去のログ
  - 設定

### 6. 基本的なユーモア要素

#### 6.1 ゴリラキャラクターの応答パターン
- **基本パターン**:
  - 「今日の怒りはバナナ何本分...じゃなくて10段階中いくつだ？」
  - 「どうした？バナナ食うか？相談に乗るぞ？」
  - 「怒りも大事な感情だけど、一緒に整理してみようか」
- **配慮事項**: ユーモアと専門性のバランス維持

---

## 📈 High（MVP1.1 - 2025年9月）

### 1. 落ち着きポイントシステム
- **機能**: 相談回数・怒り鎮静効果をスコア化
- **計算要素**:
  - 相談セッション完了回数
  - 怒りレベル改善度
  - 継続利用日数
- **目的**: ユーザーのモチベーション向上、継続利用促進

### 2. Googleログイン連携
- **機能**: Googleアカウントでの簡単ログイン
- **目的**: 登録障壁の軽減

### 3. PWA（プログレッシブウェブアプリ）化
- **機能**: ネイティブアプリ同様の体験提供
- **要件**: オフライン閲覧、プッシュ通知基盤

### 4. 過去ログ高度検索
- **機能**: より詳細な検索・フィルター機能
- **追加要素**: タグ検索、期間指定、複合条件

---

## 🔧 Medium（フェーズ2 - 2025年秋）

### 1. D3.js 怒りの傾向バブルマップ
- **機能**: 怒りのトリガーや傾向を視覚的にマップ表示
- **仕様**:
  - 最大10個のバブル表示
  - バブルサイズ＝頻度、色＝怒りレベル
  - インタラクティブな操作（クリックで詳細表示）
- **技術**: D3.js v7

### 2. プッシュ通知・リマインダー
- **機能**: 記録・相談の習慣化サポート
- **通知タイミング**: カスタマイズ可能

### 3. パスワードリセット機能
- **機能**: メール認証によるパスワード再設定

### 4. 利用規約・お問い合わせページ
- **機能**: 法的要件・ユーザーサポート対応

---

## 💰 Low（将来版）

### 1. 収益化機能
- **アフィリエイト**: 関連書籍・グッズの紹介
- **アドセンス**: 適切な広告配置
- **プレミアム機能**: 高度な分析・アドバイス機能

### 2. バッジ・実績システム
- **機能**: 相談回数、継続日数、成長実績のゲーミフィケーション
- **種類**: 
  - 相談マスター（累計相談回数）
  - クールダウンキング（怒り鎮静効果）
  - 継続チャンピオン（連続利用日数）

### 3. 格言・名言表示機能
- **機能**: トップ画面での日替わり格言表示
- **連動**: 相談機能との組み合わせ

---

## ⚙️ 非機能要件

### 1. パフォーマンス要件

| 項目 | 要件 | 測定方法 |
|------|------|----------|
| **ページ読み込み時間** | 3秒以内 | Lighthouse測定 |
| **AI応答時間** | 10秒以内 | ユーザー離脱防止のため |
| **検索応答時間** | 1秒以内 | UX品質維持 |
| **同時ユーザー数** | 100人 | 個人開発規模として十分 |

### 2. セキュリティ要件

| 項目 | 要件 | 実装方法 |
|------|------|----------|
| **データ暗号化** | 相談内容の機密保護 | データベース暗号化 |
| **通信暗号化** | HTTPS強制 | SSL証明書適用 |
| **認証セキュリティ** | JWT実装 | セッション管理 |
| **API保護** | OpenAI APIキー保護 | 環境変数管理 |

### 3. アクセシビリティ要件

| 対象特性 | 配慮事項 | 実装方法 |
|----------|----------|----------|
| **ASD特性** | 予測可能性、構造化 | 一貫したUI設計 |
| **HSP特性** | 感覚刺激の調整 | 色彩・音響の配慮 |
| **視覚的明確さ** | 曖昧さの排除 | 明確なラベリング |
| **操作の簡潔性** | 認知負荷の軽減 | シンプルなワークフロー |

### 4. 技術制約

| 項目 | 制約 | 理由 |
|------|------|------|
| **OpenAI API予算** | 月10ドル | 個人開発の予算制約 |
| **ホスティング** | Vercel + Render | コスト効率性 |
| **データベース** | PostgreSQL | 既存技術スタック |
| **フロントエンド** | Next.js 15 | 既存技術スタック |

---

## 📊 成功指標・KPI

### 1. 継続利用指標

| 指標 | 目標値 | 業界平均 | 測定方法 |
|------|--------|----------|----------|
| **7日継続率** | 30%以上 | 6% | アクティブユーザー追跡 |
| **30日継続率** | 15%以上 | 3.3% | ユーザー行動分析 |
| **平均利用頻度** | 週3回以上 | - | セッション数計測 |

### 2. 機能利用指標

| 指標 | 目標値 | 測定方法 |
|------|--------|----------|
| **アンガーログ記録率** | 80%以上 | 登録ユーザーに対する記録率 |
| **AI相談利用率** | 60%以上 | 記録に対する相談率 |
| **過去ログ閲覧率** | 40%以上 | 振り返り機能の利用率 |

### 3. ユーザー満足度指標

| 指標 | 目標値 | 測定方法 |
|------|--------|----------|
| **ユーザー満足度** | 4.5/5.0以上 | アプリ内評価機能 |
| **NPS（推奨度）** | 50以上 | 定期的なアンケート |
| **怒り継続時間短縮** | 50%減 | 自己申告ベース |

---

## 🗓️ 開発スケジュール

### MVP1.0 開発計画（2025年7月18日〜8月18日）

| 期間 | 主要タスク | 成果物 |
|------|------------|--------|
| **7月18日-25日** | 企画・設計フェーズ | 市場調査、ペルソナ、要件定義 |
| **7月26日-8月3日** | 基盤開発 | 認証、データベース、基本UI |
| **8月4日-10日** | コア機能開発 | アンガーログ、AI相談機能 |
| **8月11日-15日** | 過去ログ・統合 | 過去ログ管理、機能統合 |
| **8月16日-18日** | テスト・リリース | ユーザーテスト、MVP完成 |

### MVP以降の開発計画（2025年8月19日〜9月4日）

| 期間 | 主要タスク | 成果物 |
|------|------------|--------|
| **8月19日-24日** | MVP後機能実装 | 落ち着きポイント、PWA化 |
| **8月25日-29日** | 追加機能・改善 | Googleログイン、高度検索 |
| **8月30日-9月4日** | 調整・収益化準備 | アドセンス調査、最終調整 |

---

## 🔄 将来の機能拡張ロードマップ

### フェーズ1: MVP強化（2025年8月19日-9月4日）
- 落ち着きポイントシステム
- PWA化
- Googleログイン
- 高度検索機能
- アドセンス調査・導入準備

### フェーズ2: 差別化強化（2025年9月-10月）
- D3.js バブルマップ
- プッシュ通知システム
- ユーモア要素の拡充
- 利用規約・お問い合わせページ

### フェーズ3: 収益化・拡張（2025年11月-）
- アフィリエイト・アドセンス本格運用
- プレミアム機能検討
- B2B展開検討

---

## 🛡️ リスク管理

### 技術リスク

| リスク | 影響度 | 対策 |
|--------|--------|------|
| **OpenAI API制限** | 高 | 使用量監視、代替API検討 |
| **パフォーマンス問題** | 中 | 定期的な性能測定 |
| **セキュリティ脆弱性** | 高 | 定期的なセキュリティ監査 |

### ビジネスリスク

| リスク | 影響度 | 対策 |
|--------|--------|------|
| **ユーザー受容性** | 高 | ユーザーテストの実施 |
| **競合参入** | 中 | 差別化要素の強化 |
| **法的問題** | 中 | 利用規約の整備 |

---

## 📝 開発指針

### 1. ユーザー中心設計
- **ASD/HSP特性**への継続的配慮
- **ユーザビリティテスト**の定期実施
- **アクセシビリティ**の優先

### 2. 段階的リリース
- **MVP1.0**で実用性確保
- **ユーザーフィードバック**による機能改善
- **データドリブン**な機能拡張

### 3. 品質重視
- **セキュリティファースト**
- **パフォーマンス最適化**
- **継続的なテスト実施**
